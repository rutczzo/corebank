# Corebank â€” ê°„ë‹¨í•œ ì½”ì–´ë±…í‚¹ í•™ìŠµ í”„ë¡œì íŠ¸

## í”„ë¡œì íŠ¸ ê°œìš”
ì´ í”„ë¡œì íŠ¸ëŠ” **ì€í–‰ í•µì‹¬ ì‹œìŠ¤í…œ(Core Banking)** ì„ ë‹¨ìˆœí™”í•˜ì—¬ ì§ì ‘ êµ¬í˜„í•œ í•™ìŠµìš© í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤.  
ê³„ì¢Œ(Account), ê±°ë˜(Transfer), ì›ì¥(JournalEntry) ê°™ì€ ì€í–‰ ì‹œìŠ¤í…œì˜ ê¸°ë³¸ ê°œë…ì„ ì½”ë“œë¡œ ë‹¤ë£¨ë©°,  
**íŠ¸ëœì­ì…˜, ë©±ë“±ì„±(Idempotency), ì´ì¤‘ê¸°ì¥(Double Entry Bookkeeping)** ê³¼ ê°™ì€ í•µì‹¬ ì›ë¦¬ë¥¼ ì´í•´í•˜ëŠ” ë° ëª©ì ì´ ìˆìŠµë‹ˆë‹¤.

ìµœì¢… ëª©í‘œëŠ” ì™„ì„±ëœ ì„œë¹„ìŠ¤ë¥¼ ë§Œë“œëŠ” ê²ƒì´ ì•„ë‹ˆë¼,  
**êµ¬ì¡° â†’ ê·œì¹™ â†’ API â†’ ê²€ì¦** ì˜ íë¦„ì„ ë”°ë¼ê°€ë©° **ì€í–‰ ë„ë©”ì¸ê³¼ ì•„í‚¤í…ì²˜ì˜ ê¸°ë³¸ ê°œë…**ì„ ë°°ìš°ëŠ” ê²ƒì…ë‹ˆë‹¤.

---

## ğŸ“š Core Banking Concepts & Key Principles

ì´ í”„ë¡œì íŠ¸ëŠ” ë‹¨ìˆœí•œ ì”ì•¡ ê´€ë¦¬ê°€ ì•„ë‹ˆë¼ **ì€í–‰ ì½”ì–´ë±…í‚¹ ì‹œìŠ¤í…œì˜ í•µì‹¬ ì›ì¹™**ì„ í† ì´ í˜•íƒœë¡œ êµ¬í˜„í•˜ë©°,  
ê·¸ ê³¼ì •ì—ì„œ ì†Œí”„íŠ¸ì›¨ì–´ ì•„í‚¤í…ì²˜ì™€ ë°ì´í„°ë² ì´ìŠ¤ì˜ ì¤‘ìš”í•œ ê°œë…ì„ í•™ìŠµí•©ë‹ˆë‹¤.

### ì€í–‰ ë„ë©”ì¸ ê°œë…
- **Ledger (ì›ì¥)**  
  ëª¨ë“  ê±°ë˜ëŠ” ì›ì¥(Journal)ì— ê¸°ë¡ë©ë‹ˆë‹¤. ì”ì•¡(balance)ì€ ì›ì¥ì˜ í•©ì‚° ê²°ê³¼ì´ë©°,  
  ì›ì¥ì„ í†µí•´ ì–¸ì œ/ì–´ë””ì„œ/ì–¼ë§ˆê°€ ì´ë™í–ˆëŠ”ì§€ ì¶”ì  ê°€ëŠ¥í•©ë‹ˆë‹¤.

- **House Account (í•˜ìš°ìŠ¤ ê³„ì •)**  
  ì€í–‰ ë‚´ë¶€ ì •ì‚° ê³„ì •ì…ë‹ˆë‹¤.  
  ì…ê¸ˆ/ì¶œê¸ˆì€ í•­ìƒ ê³ ê° ê³„ì¢Œì™€ í•˜ìš°ìŠ¤ ê³„ì¢Œ ê°„ ë”ë¸” ì—”íŠ¸ë¦¬(double entry)ë¡œ ê¸°ë¡ë©ë‹ˆë‹¤.

- **Transaction Types**
  - Deposit: ê³ ê° ê³„ì¢Œì— ëˆì„ ë„£ëŠ” ê±°ë˜
  - Withdraw: ê³ ê° ê³„ì¢Œì—ì„œ ëˆì„ ë¹¼ëŠ” ê±°ë˜
  - Account Transfer: ê³„ì¢Œ Aì—ì„œ ê³„ì¢Œ Bë¡œ ì†¡ê¸ˆí•˜ëŠ” ê±°ë˜

- **Double Entry Principle**  
  ëª¨ë“  ê±°ë˜ëŠ” ìµœì†Œ ë‘ ì¤„(Debit/ì°¨ë³€, Credit/ëŒ€ë³€)ìœ¼ë¡œ ê¸°ë¡ë˜ì–´ì•¼ í•˜ë©°,  
  ì´ë ‡ê²Œ í•¨ìœ¼ë¡œì¨ â€œëˆì´ ì‚¬ë¼ì§€ê±°ë‚˜ ìƒê²¨ë‚˜ëŠ” ìƒí™©â€ì„ ì›ì²œ ì°¨ë‹¨í•©ë‹ˆë‹¤.

### êµ¬í˜„/ì†Œí”„íŠ¸ì›¨ì–´ ê°œë…
- **íŠ¸ëœì­ì…˜ (Transaction)**  
  ê±°ë˜ëŠ” ë°˜ë“œì‹œ **ëª¨ë‘ ì„±ê³µí•˜ê±°ë‚˜ ì „í˜€ ë°˜ì˜ë˜ì§€ ì•Šì•„ì•¼** í•©ë‹ˆë‹¤.  
  Springì˜ `@Transactional`ë¡œ í•˜ë‚˜ì˜ íŠ¸ëœì­ì…˜ì—ì„œ ì²˜ë¦¬í•˜ë©°, ì‹¤íŒ¨ ì‹œ ì „ì²´ ë¡¤ë°±ë©ë‹ˆë‹¤.

- **ë©±ë“±ì„± (Idempotency)**  
  ê°™ì€ ê±°ë˜ ì˜ë„ê°€ ì—¬ëŸ¬ ë²ˆ ìš”ì²­ë˜ë”ë¼ë„ ê²°ê³¼ëŠ” í•œ ë²ˆë§Œ ë°˜ì˜ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.  
  `transfers.idempotency_key`ì— UNIQUE ì œì•½ì„ ê±¸ì–´ ì¤‘ë³µ ì‚½ì…ì„ ë§‰ê³ , ì´ë¯¸ ì¡´ì¬í•˜ë©´ ê°™ì€ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

- **DTO ë¶„ë¦¬ (API ê³„ì•½ ê³ ì •)**  
  API ìš”ì²­ê³¼ ì‘ë‹µì€ ë°˜ë“œì‹œ DTOë¥¼ í†µí•´ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤.  
  ì—”í‹°í‹°ë¥¼ ê·¸ëŒ€ë¡œ ë…¸ì¶œí•˜ì§€ ì•ŠìŒìœ¼ë¡œì¨, ë³´ì•ˆ ë¬¸ì œì™€ ë‚´ë¶€ êµ¬ì¡° ë³€ê²½ì— ë”°ë¥¸ ì™¸ë¶€ ì˜í–¥ì´ ì°¨ë‹¨ë©ë‹ˆë‹¤.

---

## âš™ Tech Stack
- Java 21
- Spring Boot 3.5.x
- PostgreSQL 16 (Docker Compose)
- Flyway (DB ë§ˆì´ê·¸ë ˆì´ì…˜ ê´€ë¦¬)
- Spring Data JPA
- Lombok
- Spring Boot Actuator (í—¬ìŠ¤ì²´í¬)
- Gradle (Groovy DSL)

---

## ì „ì²´ êµ¬ì¡°ì™€ íë¦„

**ì›¹ ê³„ì¸µ (Controller)**  
ì‚¬ìš©ìì™€ ìƒí˜¸ì‘ìš©í•©ë‹ˆë‹¤.  
HTTP ìš”ì²­(JSON)ì„ ë°›ì•„ ìš”ì²­ DTOë¡œ ë³€í™˜í•˜ê³  â†’ ì„œë¹„ìŠ¤ ê³„ì¸µì„ í˜¸ì¶œí•©ë‹ˆë‹¤.  
ì„œë¹„ìŠ¤ ê²°ê³¼(ì—”í‹°í‹°)ëŠ” ê·¸ëŒ€ë¡œ ë…¸ì¶œí•˜ì§€ ì•Šê³ , ì‘ë‹µ DTOë¡œ ë³€í™˜í•´ ë°˜í™˜í•©ë‹ˆë‹¤.  
â†’ ì±…ì„: **ì…ì¶œë ¥(I/O), API ê³„ì•½**

â¬‡ï¸ **DTO(Data Transfer Object)** ë¥¼ ë§¤ê°œë¡œ ê°’ ì „ë‹¬  
ìš”ì²­ DTOëŠ” ì‚¬ìš©ì ì…ë ¥ì„, ì‘ë‹µ DTOëŠ” ì„œë¹„ìŠ¤ ê²°ê³¼ë¥¼ ì™¸ë¶€ì— ë§ëŠ” í˜•ì‹ìœ¼ë¡œ ê³ ì •í•©ë‹ˆë‹¤.

**ì„œë¹„ìŠ¤ ê³„ì¸µ (Service)**  
ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ ë‹´ê¸°ëŠ” í•µì‹¬ ê³„ì¸µì…ë‹ˆë‹¤.  
ì˜ˆ: ì¶œê¸ˆ ì‹œ ì”ì•¡ ì¶©ë¶„ ì—¬ë¶€ í™•ì¸, ì´ì²´ ì‹œ ì¶œê¸ˆ ê³„ì¢Œì™€ ì…ê¸ˆ ê³„ì¢Œê°€ ë‹¬ë¼ì•¼ í•¨.  
íŠ¸ëœì­ì…˜(@Transactional) ê´€ë¦¬, ë©±ë“±ì„± ê²€ì¦(idempotencyKey)ë„ ì´ ê³„ì¸µì—ì„œ ìˆ˜í–‰í•©ë‹ˆë‹¤.  
ì„œë¹„ìŠ¤ëŠ” ë¦¬í¬ì§€í† ë¦¬ë¥¼ í†µí•´ ì—”í‹°í‹°ë¥¼ ì¡°íšŒÂ·ìˆ˜ì •í•˜ê³ , ì›ì¥(JournalEntry)ì— ê±°ë˜ ê¸°ë¡ì„ ë‚¨ê¹ë‹ˆë‹¤.  
â†’ ì±…ì„: **ê·œì¹™ê³¼ ì ˆì°¨, íŠ¸ëœì­ì…˜ ê´€ë¦¬**

â¬‡ï¸ **Repository í˜¸ì¶œ**

**ë¦¬í¬ì§€í† ë¦¬ ê³„ì¸µ (Repository)**  
DB ì ‘ê·¼ ì „ìš© ê³„ì¸µì…ë‹ˆë‹¤.  
Spring Data JPA ì¸í„°í˜ì´ìŠ¤ë§Œ ì •ì˜í•˜ë©°, êµ¬í˜„ì€ í”„ë ˆì„ì›Œí¬ê°€ ìƒì„±í•©ë‹ˆë‹¤.  
ë¦¬í¬ì§€í† ë¦¬ëŠ” ë‹¨ìˆœíˆ ì—”í‹°í‹°ë¥¼ ì €ì¥/ì¡°íšŒí•˜ê³ , ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ì€ ë‘ì§€ ì•ŠìŠµë‹ˆë‹¤.  
DB ì œì•½ì¡°ê±´(UNIQUE, FK)ì„ í™œìš©í•´ ë¬´ê²°ì„±ê³¼ ë™ì‹œì„±ì„ ë³´ì¥í•©ë‹ˆë‹¤.  
â†’ ì±…ì„: **ë°ì´í„° ì ‘ê·¼ ê²½ê³„**

â¬‡ï¸ **ì—”í‹°í‹°(Entity)ì™€ ë§¤í•‘**

**ë„ë©”ì¸ (Entity)**  
DB í…Œì´ë¸”ê³¼ ë§¤í•‘ëœ ê°ì²´ì…ë‹ˆë‹¤.  
ì˜ˆ: `Customer`, `Account`, `Transfer`, `JournalEntry`.  
ê³„ì¢Œì˜ balance, status ê°™ì€ ìƒíƒœë¥¼ ë³´ê´€í•˜ê³ , ê¸°ë³¸ì ì¸ ì œì•½ì¡°ê±´ì„ í‘œí˜„í•©ë‹ˆë‹¤.  
í•™ìŠµ ë‹¨ê³„ì—ì„œëŠ” ê²Œí„°/ì„¸í„°ë¥¼ ì—´ì–´ ì§ê´€ì ìœ¼ë¡œ ë‹¤ë£¨ì§€ë§Œ,  
ì‹¤ì œ ì„œë¹„ìŠ¤ ìˆ˜ì¤€ì—ì„œëŠ” ì„¸í„° ëŒ€ì‹  `credit`, `debit`, `freeze` ê°™ì€ **ì˜ë„ ë©”ì„œë“œ**ë¡œ ìƒíƒœ ë³€ê²½ì„ ê°•ì œí•©ë‹ˆë‹¤.  
â†’ ì±…ì„: **ë°ì´í„° í‘œí˜„ + ê¸°ë³¸ ê·œì¹™ ë‚´ì¥**

---

## ë°ì´í„° ëª¨ë¸ê³¼ ê·œì¹™

**ì—”í‹°í‹°**
- Customer â€” ê³ ê°
- Account â€” ê³„ì¢Œ (ê³ ê° ì†Œìœ , balance, status í¬í•¨)
- Transfer â€” ê±°ë˜ (ì…ê¸ˆ/ì¶œê¸ˆ/ì´ì²´, ë©±ë“±ì„± í‚¤ í¬í•¨)
- JournalEntry â€” ì›ì¥ ê¸°ë¡ (Debit/Credit, Transferì™€ ì—°ê²°)

**ë¶ˆë³€ì‹(ê·œì¹™)**
- amount > 0
- ê³„ì¢ŒëŠ” ACTIVE ìƒíƒœì—¬ì•¼ ê±°ë˜ ê°€ëŠ¥
- ì´ì²´ ì‹œ ì¶œê¸ˆ ê³„ì¢Œ â‰  ì…ê¸ˆ ê³„ì¢Œ
- ì”ì•¡ ë¶€ì¡± ì‹œ ì¶œê¸ˆ/ì´ì²´ ë¶ˆê°€
- ëª¨ë“  ê±°ë˜ëŠ” ì›ì¥ ê¸°ë¡ í•„ìˆ˜

---

## API ì„¤ê³„

**ì—”ë“œí¬ì¸íŠ¸**
- `POST /api/transactions/deposit` â€” ì…ê¸ˆ
- `POST /api/transactions/withdraw` â€” ì¶œê¸ˆ
- `POST /api/transactions/transfer` â€” ê³„ì¢Œ ì´ì²´

**ìš”ì²­(Request DTO)**
- ì…ê¸ˆ/ì¶œê¸ˆ: `accountNo`, `amount`, `idempotencyKey`
- ì´ì²´: `fromAccountNo`, `toAccountNo`, `amount`, `idempotencyKey`

**ì‘ë‹µ(Response DTO)**
- ìµœì†Œ: `transferId` (ê±°ë˜ ì‹ë³„ì), `status` (SUCCEEDED/FAILED ë“±)

**ì—ëŸ¬ ì½”ë“œ**
- 400 Bad Request â€” ì˜ëª»ëœ ì…ë ¥
- 422 Unprocessable Entity â€” ë„ë©”ì¸ ê·œì¹™ ìœ„ë°˜ (ì˜ˆ: ì”ì•¡ ë¶€ì¡±)
- 409 Conflict â€” ë©±ë“±ì„± ì¶©ëŒ

---

## ì‹¤í–‰ íë¦„ ì˜ˆì‹œ

1. ì‚¬ìš©ìê°€ `/api/transactions/deposit` í˜¸ì¶œ  
   â†’ JSON ìš”ì²­ì´ ìš”ì²­ DTOë¡œ ë³€í™˜
2. ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ì„œë¹„ìŠ¤ ê³„ì¸µ í˜¸ì¶œ  
   â†’ `TransferService.deposit()` ì‹¤í–‰
3. ì„œë¹„ìŠ¤ ê³„ì¸µì—ì„œ ê·œì¹™ ê²€ì¦ ë° íŠ¸ëœì­ì…˜ ì²˜ë¦¬
  - ê³„ì¢Œ ìƒíƒœ í™•ì¸
  - ê¸ˆì•¡ ìœ íš¨ì„± í™•ì¸
  - idempotencyKey ì¤‘ë³µ ê²€ì‚¬
  - balance ë³€ê²½ ë° ì›ì¥ ê¸°ë¡
4. ë¦¬í¬ì§€í† ë¦¬ê°€ ì—”í‹°í‹° ì €ì¥/ì¡°íšŒ
5. ê²°ê³¼ë¥¼ Transfer ì—”í‹°í‹°ë¡œ ë°˜í™˜ â†’ ì‘ë‹µ DTOë¡œ ë³€í™˜
6. í´ë¼ì´ì–¸íŠ¸ëŠ” `{transferId, status}` JSON ì‘ë‹µ ìˆ˜ì‹ 

---

## í•™ìŠµ í¬ì¸íŠ¸
- Flywayë¡œ DB ìŠ¤í‚¤ë§ˆë¥¼ ë²„ì „ ê´€ë¦¬í•˜ê³ , Spring JPAëŠ” ê²€ì¦(`ddl-auto=validate`)ë§Œ ìˆ˜í–‰
- JPA ì—”í‹°í‹°ì™€ DB ìŠ¤í‚¤ë§ˆë¥¼ 1:1ë¡œ ë§¤í•‘í•˜ëŠ” ë°©ë²•
- ì„œë¹„ìŠ¤ ê³„ì¸µì— ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ì„ ì§‘ì¤‘ì‹œí‚¤ëŠ” ì´ìœ 
- ë©±ë“±ì„± ë³´ì¥ ì „ëµ(DB ì œì•½ì¡°ê±´ í™œìš©)
- ì´ì¤‘ê¸°ì¥ì˜ ì›ë¦¬ì™€ íšŒê³„ì  ì˜ë¯¸
- API ì„¤ê³„ì—ì„œ DTO ë¶„ë¦¬ì˜ ì¤‘ìš”ì„±

---

## í™•ì¥ ì•„ì´ë””ì–´ (ì¶”ê°€ í•™ìŠµ ì£¼ì œ)

ì´ í”„ë¡œì íŠ¸ëŠ” í•™ìŠµìš© MVP ìˆ˜ì¤€ì´ì§€ë§Œ, ì´í›„ í™•ì¥ì„ í†µí•´ ë” ê¹Šì€ ì€í–‰ ë„ë©”ì¸ê³¼ ë°ì´í„°ë² ì´ìŠ¤ ê°œë…ì„ ì‹¤í—˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- **íŠ¸ëœì­ì…˜ ê²©ë¦¬ ìˆ˜ì¤€ (Isolation Levels)**
  - READ COMMITTED / REPEATABLE READ / SERIALIZABLE ë¹„êµ
  - ë™ì‹œì„± ë¬¸ì œ(Dirty Read, Phantom Read ë“±)ë¥¼ ì¬í˜„í•˜ê³  í•´ê²° ë°©ë²• ì‹¤í—˜

- **ë°ì´í„°ë² ì´ìŠ¤ êµì²´ í•™ìŠµ**
  - PostgreSQL â†’ MySQLë¡œ êµì²´ ì‹œ ì°¨ì´ì 
    - AUTO_INCREMENT vs SERIAL/IDENTITY
    - DATETIME vs TIMESTAMPTZ
    - UNIQUE ì œì•½ ë° Lock ë™ì‘ ë°©ì‹
  - ë™ì¼í•œ ë„ë©”ì¸ ëª¨ë¸ì„ RDBë§ˆë‹¤ ì–´ë–»ê²Œ ì ìš©í• ì§€ ë¹„êµ

- **ORM â†” ìˆœìˆ˜ SQL ë¹„êµ**
  - JPA/Hibernate ê¸°ë°˜ ì„¤ê³„ vs ì§ì ‘ SQL (MyBatis, JDBC Template ë“±)
  - ì„±ëŠ¥, ì œì–´ ìˆ˜ì¤€, ì½”ë“œ ë³µì¡ë„ ì°¨ì´ë¥¼ ì²´ê°

- **ê³ ê¸‰ ì£¼ì œ**
  - ë¶„ì‚° íŠ¸ëœì­ì…˜, CQRS, ì´ë²¤íŠ¸ ì†Œì‹±
  - Kafka ê°™ì€ ë©”ì‹œì§€ ë¸Œë¡œì»¤ì™€ ì—°ê³„í•œ ë¹„ë™ê¸° ì²˜ë¦¬
  - ë‹¤ì¤‘ í†µí™”(Multi-Currency), í™˜ìœ¨ ì ìš© ë¡œì§

ì´ í™•ì¥ ì•„ì´ë””ì–´ë“¤ì€ ì‹¤ì œ ê¸ˆìœµ ì‹œìŠ¤í…œì—ì„œ ìì£¼ ê³ ë¯¼ë˜ëŠ” ì£¼ì œì´ë©°,  
ë³¸ í”„ë¡œì íŠ¸ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì ì§„ì ìœ¼ë¡œ ì‹¤í—˜í•´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

##  ğŸ§ª  ìˆ˜ë™ í…ŒìŠ¤íŠ¸

> ìƒì„¸ ì‹œë‚˜ë¦¬ì˜¤: 'docs/TESTING.md'

1) ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰
```bash
./gradlew bootRun
```

2) í—¬ìŠ¤ ì²´í¬
```bash
http://localhost:8080/actuator/health
```

3) ëª¨ì˜ ë°ì´í„° ê¸°ë³¸ ì„¸íŒ… - ê³ ê°/ê³„ì¢Œ 3ê°œ
```bash
docker exec -it <postgres-container> psql -U core -d corebank -c "
INSERT INTO customers (id, name, created_at) VALUES
('00000000-0000-0000-0000-000000000001','HOUSE',now())
ON CONFLICT DO NOTHING;
INSERT INTO customers (id, name, created_at) VALUES
('00000000-0000-0000-0000-000000000002','Alice',now()),
('00000000-0000-0000-0000-000000000003','Bob',now())
ON CONFLICT DO NOTHING;
INSERT INTO accounts (id, customer_id, account_number, currency, status, is_house, balance, created_at) VALUES
('10000000-0000-0000-0000-000000000001','00000000-0000-0000-0000-000000000001','HOUSE-0001','KRW','ACTIVE',true,0,now())
ON CONFLICT DO NOTHING;
INSERT INTO accounts (id, customer_id, account_number, currency, status, is_house, balance, created_at) VALUES
('10000000-0000-0000-0000-000000000002','00000000-0000-0000-0000-000000000002','A-0001','KRW','ACTIVE',false,0,now()),
('10000000-0000-0000-0000-000000000003','00000000-0000-0000-0000-000000000003','B-0001','KRW','ACTIVE',false,0,now())
ON CONFLICT DO NOTHING;
"
```

4) ìŠ¤ëª¨í¬ í˜¸ì¶œ ì˜ˆì‹œ (ë©±ë“± ì˜ˆì‹œ í¬í•¨)
```bash
# ì…ê¸ˆ(ë©±ë“±í‚¤ ë™ì¼ 2íšŒ â†’ 1íšŒë§Œ ë°˜ì˜)
curl -s -X POST http://localhost:8080/api/transactions/deposit \
 -H "Content-Type: application/json" \
 -d '{"accountNo":"A-0001","idempotencyKey":"SMOKE-DEP-001","amount":5000}'

curl -s -X POST http://localhost:8080/api/transactions/deposit \
 -H "Content-Type: application/json" \
 -d '{"accountNo":"A-0001","idempotencyKey":"SMOKE-DEP-001","amount":5000}'

# ì¶œê¸ˆ
curl -s -X POST http://localhost:8080/api/transactions/withdraw \
 -H "Content-Type: application/json" \
 -d '{"accountNo":"A-0001","idempotencyKey":"SMOKE-WITH-001","amount":1000}'

# ê³„ì¢Œì´ì²´
curl -s -X POST http://localhost:8080/api/transactions/transfer \
 -H "Content-Type: application/json" \
 -d '{"fromAccountNo":"A-0001","toAccountNo":"B-0001","idempotencyKey":"SMOKE-TRF-001","amount":2000}'
```

5) ê²°ê³¼ í™•ì¸
```bash
docker exec -it <postgres-container> psql -U core -d corebank -c "SELECT account_number,balance FROM accounts ORDER BY account_number;"
```